<!doctype html >

<html lang="en" xmlns:th="http://thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head th:replace="~{components/head :: head}"></head>
<body>
<script th:src="@{/js/demo-theme.min.js}"></script>
<div class="page">
    <!-- Navbar -->
    <header th:replace="~{components/navbar :: navbar}"></header>
    <!--  Menu  -->
    <div layout:fragment="menu"><div th:replace="~{components/menu :: menu}"></div></div>

    <div class="page-wrapper" layout:fragment="content">

    </div>

    <footer th:replace="~{components/footer :: footer}"></footer>
</div>
<!--Script-->
<script th:src="@{/js/tabler.min.js}" defer></script>
<div layout:fragment="scripts">
</div>
</body>

<script>
    let navLoginBtn = document.getElementById('navbar-login-btn');
    console.log(navLoginBtn);
    let navAvtAction = document.getElementById('navbar-avatar-action');
    let isLogged = localStorage.getItem('isLogged');
    // Kiểm tra xem biến isLogged có trong localStorage không
    if (isLogged === null) {
        // Nếu không có, gửi yêu cầu đến server để lấy giá trị
        fetch('/getLoggedStatus')
            .then(response => response.json())
            .then(data => {
                if (data.isLogged !== undefined) {
                    localStorage.setItem('isLogged', data.isLogged);
                }
            })
            .catch(error => {
                console.error('Error fetching isLogged status:', error);
            });
        navLoginBtn.classList.remove('hide');
        navAvtAction.classList.add('hide');
    } else if(isLogged === 'true'){
        navLoginBtn.classList.add('hide');
        navAvtAction.classList.remove('hide');
    } else{
        navLoginBtn.classList.remove('hide');
        navAvtAction.classList.add('hide');
    }
</script>

</html>